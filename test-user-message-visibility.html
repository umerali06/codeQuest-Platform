<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Message Visibility Test</title>
    <link rel="stylesheet" href="public/ai-assistant.css" />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        margin: 0;
        padding: 20px;
        background: #f9fafb;
      }
      .test-container {
        max-width: 600px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }
      .test-messages {
        background: #f9fafb;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .test-button {
        background: #6366f1;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        margin: 5px;
      }
      .test-button:hover {
        background: #5855f7;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1>üîç User Message Visibility Test</h1>
      <p>
        Testing if user messages are visible with proper background and text
        color.
      </p>

      <div class="test-messages" id="test-messages">
        <div class="ai-message user-message">
          <p>
            <strong>You:</strong> This is a test user message. Can you see the
            background and white text?
          </p>
        </div>

        <div class="ai-message ai-message">
          <p>
            This is an AI response message. It should have a white background
            with dark text.
          </p>
        </div>

        <div class="ai-message user-message">
          <p>
            <strong>You:</strong> Another user message to test visibility. The
            background should be purple gradient.
          </p>
        </div>
      </div>

      <button class="test-button" onclick="openAI()">Open AI Assistant</button>
      <button class="test-button" onclick="testUserMessage()">
        Send Test User Message
      </button>
      <button class="test-button" onclick="addTestMessage()">
        Add Static Test Message
      </button>

      <div id="test-log" style="margin-top: 20px"></div>
    </div>

    <script src="public/ai-assistant.js"></script>
    <script>
      function log(message) {
        const logDiv = document.getElementById("test-log");
        const timestamp = new Date().toLocaleTimeString();
        logDiv.innerHTML += `<div style="padding: 8px; background: #e5e7eb; margin: 5px 0; border-radius: 4px;">[${timestamp}] ${message}</div>`;
      }

      function openAI() {
        if (window.aiAssistant) {
          window.aiAssistant.toggleChat();
          log("AI Assistant opened - check user message visibility");
        } else {
          log("AI Assistant not initialized");
        }
      }

      function testUserMessage() {
        if (window.aiAssistant) {
          window.aiAssistant.sendMessage(
            "This is a test message to check if user messages are visible with proper styling"
          );
          log(
            "Test user message sent - check if it appears with purple background and white text"
          );
        } else {
          log("AI Assistant not initialized");
        }
      }

      function addTestMessage() {
        const testMessages = document.getElementById("test-messages");
        const newMessage = document.createElement("div");
        newMessage.className = "ai-message user-message";
        newMessage.innerHTML =
          "<p><strong>You:</strong> Dynamically added test message - " +
          new Date().toLocaleTimeString() +
          "</p>";
        testMessages.appendChild(newMessage);
        log("Added new test message to static container");
      }

      document.addEventListener("DOMContentLoaded", () => {
        log("User message visibility test loaded");
        log(
          "Check the test messages above - user messages should have purple gradient background"
        );
      });
    </script>
  </body>
</html>
