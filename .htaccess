RewriteEngine On

# Handle API requests
RewriteCond %{REQUEST_URI} ^/api/(.*)$
RewriteRule ^api/(.*)$ api/index.php [QSA,L,E=PATH_INFO:/$1]

# Handle static files
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Handle public files
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ public/$1 [QSA,L]

# Default to index.html for root
RewriteRule ^$ public/index.html [L]