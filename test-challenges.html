<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Challenges Page - CodeQuest</title>
    <link rel="stylesheet" href="public/animations.css" />
    <link rel="stylesheet" href="public/styles.css" />
    <link rel="stylesheet" href="public/challenges-styles.css" />
    <style>
      body {
        padding-top: 80px;
      }
      .test-section {
        padding: 2rem;
        margin: 2rem 0;
        background: rgba(30, 41, 59, 0.6);
        border: 1px solid rgba(99, 102, 241, 0.2);
        border-radius: 15px;
      }
      .test-title {
        color: var(--primary);
        margin-bottom: 1rem;
      }
      .status {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-weight: 600;
        margin: 0.5rem 0;
      }
      .status.success {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
      }
      .status.error {
        background: rgba(239, 68, 68, 0.2);
        color: var(--danger);
      }
    </style>
  </head>
  <body>
    <div class="bg-animation"></div>

    <div class="container">
      <h1 style="text-align: center; margin: 2rem 0">
        üß™ Challenges Page Test
      </h1>

      <div class="test-section">
        <h2 class="test-title">CSS Files Loading Test</h2>
        <div id="css-test-results"></div>
      </div>

      <div class="test-section">
        <h2 class="test-title">Challenge Card Styling Test</h2>
        <div class="challenges-grid" style="max-width: 800px">
          <div
            class="challenge-card"
            data-difficulty="beginner"
            data-topic="html"
          >
            <div class="challenge-header">
              <span class="challenge-number">#001</span>
              <span class="difficulty beginner">Beginner</span>
            </div>
            <h3>Test Challenge Card</h3>
            <p>
              This is a test challenge card to verify styling is working
              correctly.
            </p>
            <div class="challenge-tags">
              <span class="tag">HTML</span>
              <span class="tag">Beginner</span>
            </div>
            <div class="challenge-stats">
              <span>‚è±Ô∏è 30 min</span>
              <span>üèÜ 50 XP</span>
              <span>‚úÖ New</span>
            </div>
            <button class="btn btn-primary">Start Challenge</button>
          </div>
        </div>
      </div>

      <div class="test-section">
        <h2 class="test-title">Progress Stats Test</h2>
        <div class="progress-overview">
          <div class="progress-stat">
            <span class="stat-value">5</span>
            <span class="stat-label">Completed</span>
          </div>
          <div class="progress-stat">
            <span class="stat-value">25</span>
            <span class="stat-label">Available</span>
          </div>
          <div class="progress-stat">
            <span class="stat-value">250</span>
            <span class="stat-label">XP Earned</span>
          </div>
          <div class="progress-stat">
            <span class="stat-value">7</span>
            <span class="stat-label">Current Streak</span>
          </div>
        </div>
      </div>

      <div class="test-section">
        <h2 class="test-title">Filter Controls Test</h2>
        <div class="challenge-filters">
          <select class="filter-select">
            <option value="all">All Difficulties</option>
            <option value="beginner">Beginner</option>
            <option value="intermediate">Intermediate</option>
            <option value="advanced">Advanced</option>
          </select>

          <select class="filter-select">
            <option value="all">All Topics</option>
            <option value="html">HTML</option>
            <option value="css">CSS</option>
            <option value="javascript">JavaScript</option>
          </select>

          <select class="filter-select">
            <option value="newest">Newest First</option>
            <option value="easiest">Easiest First</option>
            <option value="hardest">Hardest First</option>
          </select>
        </div>
      </div>

      <div class="test-section">
        <h2 class="test-title">API Connection Test</h2>
        <div id="api-test-results">
          <div class="status">Testing API connection...</div>
        </div>
        <button class="btn btn-secondary" onclick="testAPI()">Test API</button>
      </div>
    </div>

    <script>
      // Test CSS loading
      function testCSSLoading() {
        const results = document.getElementById("css-test-results");
        const tests = [
          {
            name: "CSS Variables",
            test: () =>
              getComputedStyle(document.documentElement)
                .getPropertyValue("--primary")
                .trim() !== "",
          },
          {
            name: "Background Animation",
            test: () => document.querySelector(".bg-animation") !== null,
          },
          {
            name: "Button Styles",
            test: () => {
              const btn = document.querySelector(".btn-primary");
              return (
                btn && getComputedStyle(btn).background.includes("gradient")
              );
            },
          },
          {
            name: "Challenge Card Styles",
            test: () => {
              const card = document.querySelector(".challenge-card");
              return card && getComputedStyle(card).borderRadius !== "0px";
            },
          },
        ];

        results.innerHTML = tests
          .map((test) => {
            const passed = test.test();
            return `<div class="status ${passed ? "success" : "error"}">
                    ${passed ? "‚úÖ" : "‚ùå"} ${test.name}: ${
              passed ? "PASS" : "FAIL"
            }
                </div>`;
          })
          .join("");
      }

      // Test API connection
      async function testAPI() {
        const results = document.getElementById("api-test-results");
        results.innerHTML =
          '<div class="status">Testing API connection...</div>';

        try {
          const response = await fetch("../api/challenges.php");
          const data = await response.json();

          if (response.ok && data.success) {
            results.innerHTML = `
                        <div class="status success">‚úÖ API Connection: SUCCESS</div>
                        <div class="status success">‚úÖ Challenges loaded: ${
                          data.data ? data.data.length : 0
                        }</div>
                    `;
          } else {
            results.innerHTML = `
                        <div class="status error">‚ùå API Error: ${
                          data.error || "Unknown error"
                        }</div>
                    `;
          }
        } catch (error) {
          results.innerHTML = `
                    <div class="status error">‚ùå Connection Error: ${error.message}</div>
                `;
        }
      }

      // Run tests on load
      document.addEventListener("DOMContentLoaded", () => {
        testCSSLoading();
      });
    </script>
  </body>
</html>
